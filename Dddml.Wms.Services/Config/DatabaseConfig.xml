<?xml version="1.0" encoding="UTF-8" ?>
<objects xmlns="http://www.springframework.net" xmlns:tx="http://www.springframework.net/tx">
  
  <object id="DbProvider" type="Spring.Data.Common.DbProviderFactoryObject,Spring.Data">
    <property name="Provider" value="MySql.Data.MySqlClient"/>
    <property name="ConnectionString" value="${db.ConnectionString}"/>
  </object>

  <object id="NHibernateSessionFactory" type="Spring.Data.NHibernate.LocalSessionFactoryObject, Spring.Data.NHibernate4">
    <property name="DbProvider" ref="DbProvider"/>
    <property name="MappingAssemblies">
      <list>
        <value>Dddml.Wms.Services</value>
      </list>
    </property>

    <property name="HibernateProperties">
      <dictionary>
        <!--<entry key="hibernate.connection.provider" value="NHibernate.Connection.DriverConnectionProvider"/>-->
        <entry key="dialect" value="NHibernate.Dialect.MySQLDialect"/>
        <!--<entry key="connection.driver_class" value="NHibernate.Driver.MySqlDataDriver"/>-->
        <entry key="use_outer_join" value="true"/>
        <entry key="show_sql" value="true"/>
        <entry key="hbm2ddl.auto" value="create"/>
        <entry key="hibernate.current_session_context_class"
              value="Spring.Data.NHibernate.SpringSessionContext, Spring.Data.NHibernate4"/>
        <!--
        <entry key="proxyfactory.factory_class" value="NHibernate.ByteCode.LinFu.ProxyFactoryFactory, NHibernate.ByteCode.LinFu"/>
        -->
      </dictionary>
    </property>
    
    <property name="ExposeTransactionAwareSessionFactory" value="true" />
    
  </object>

  
  <!-- Transaction Management Strategy - local database transactions -->
  <object id="transactionManager"
        type="Spring.Data.NHibernate.HibernateTransactionManager, Spring.Data.NHibernate4">

    <property name="DbProvider" ref="DbProvider"/>
    <property name="SessionFactory" ref="NHibernateSessionFactory"/>

  </object>

  <!-- Exception translation object post processor -->
  <object type="Spring.Dao.Attributes.PersistenceExceptionTranslationPostProcessor, Spring.Data"/>


  <tx:attribute-driven/>

</objects>
